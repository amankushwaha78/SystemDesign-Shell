<!--
====================================================================================================
1ï¸âƒ£ DNS RESOLUTION (REGION SELECTION STAGE)
====================================================================================================

ðŸ“Œ PURPOSE OF THIS STAGE
----------------------------------------------------------------------------------------------------
Convert a DOMAIN NAME into an IP ADDRESS
AND decide which REGION / ENTRY POINT should handle the request.

DNS happens BEFORE:
âŒ HTTP
âŒ Load Balancer
âŒ Application Gateway

====================================================================================================
ðŸ“ WHERE DNS EXISTS (MOST IMPORTANT)
====================================================================================================

DNS is NOT inside the browser.

DNS exists in MULTIPLE PLACES:

âœ” Operating System (DNS Resolver)
âœ” ISP DNS Servers (Airtel, Jio, etc.)
âœ” Public DNS (8.8.8.8, 1.1.1.1)
âœ” Cloud DNS (Azure DNS, AWS Route53, Cloudflare DNS)

ðŸ‘‰ DNS is a **distributed system running on servers across the internet**.

====================================================================================================
ðŸ§  USER ACTION
====================================================================================================

User enters URL:
----------------
https://goq.com/cosmos

Browser does:
-------------
ðŸ‘‰ Asks OS: "Do you know the IP for goq.com?"

Browser does NOT:
-----------------
âŒ Resolve DNS
âŒ Talk to DNS servers directly

====================================================================================================
ðŸ” FULL DNS RESOLUTION FLOW (STEP-BY-STEP)
====================================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚ asks for IP
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Operating System (OS)    â”‚
â”‚ DNS Resolver    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ if not found locally
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Recursive DNS Server     â”‚
â”‚ (ISP / Public DNS)       â”‚
â”‚ e.g. 8.8.8.8, 1.1.1.1    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ if not found
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authoritative DNS        â”‚
â”‚ (Azure DNS / Route53)    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ returns IP
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IP Address Returned     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

====================================================================================================
ðŸ“Œ WHAT AUTHORITATIVE DNS KNOWS
====================================================================================================

Example:
--------
goq.com â†’ 20.45.xx.xx

ðŸ‘‰ This IP usually belongs to:
âœ” Global Load Balancer
âœ” CDN
âœ” Application Gateway entry point

====================================================================================================
â“ QUESTION DNS ANSWERS
====================================================================================================

ðŸ‘‰ Which REGION / ENTRY POINT should handle this request?

DNS DOES:
---------
âœ” Choose the best REGION
âœ” Return IP of that region or global load balancer

DNS DOES NOT:
-------------
âŒ Choose a specific server
âŒ Understand URL paths (/cosmos)
âŒ Handle HTTP or HTTPS

====================================================================================================
ðŸŒ HOW DNS / GLOBAL LOAD BALANCER CHOOSES REGION
====================================================================================================

DNS or Global Traffic Manager uses routing rules:

--------------------------------------------------
1ï¸âƒ£ GEO-BASED ROUTING
--------------------------------------------------
- User from India â†’ Asia / India region
- User from US â†’ US region

Decision based on:
âœ” Client IP location

--------------------------------------------------
2ï¸âƒ£ LATENCY-BASED ROUTING (MOST COMMON)
--------------------------------------------------
- Measures round-trip time (RTT)
- Chooses region with LOWEST latency

--------------------------------------------------
3ï¸âƒ£ HEALTH-BASED FAILOVER
--------------------------------------------------
- Region A down âŒ
- Automatically route to Region B âœ…

--------------------------------------------------
4ï¸âƒ£ WEIGHTED ROUTING
--------------------------------------------------
- 80% traffic â†’ Region A
- 20% traffic â†’ Region B
(Used for canary / gradual rollout)

====================================================================================================
ðŸ“Š REGION SELECTION FLOW (SIMPLIFIED)
====================================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DNS / Global LoadBalancerâ”‚
â”‚ - latency                â”‚
â”‚ - geo                    â”‚
â”‚ - health                 â”‚
â”‚ - weights                â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Best Region IP Returned  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

====================================================================================================
ðŸ§  FINAL MEMORY TRICK
====================================================================================================

Browser â†’ asks  
OS      â†’ checks  
DNS     â†’ decides region  
IP      â†’ returned  

====================================================================================================
ðŸŽ¤ INTERVIEW-SAFE ONE-LINER
====================================================================================================

â€œDNS resolution is performed outside the browser via the OS DNS resolver and external DNS servers.
Its primary role is to resolve the domain name to an IP and select the best region or entry point
based on latency, geography, health, or routing weights.â€

====================================================================================================
END OF DNS RESOLUTION STAGE
====================================================================================================
-->
