<!--
====================================================================================================
2ï¸âƒ£ TRAFFIC ENTERS REGION â†’ L4 LOAD BALANCER
====================================================================================================

ðŸ“Œ WHAT HAPPENS JUST BEFORE THIS STEP (IMPORTANT CONTEXT)
----------------------------------------------------------------------------------------------------
After DNS resolution:
- DNS returns an IP address (region entry point)
- Client establishes a TCP connection to that IP of region.

ðŸ‘‰ The FIRST logical component that processes this connection
inside the region is the **L4 Load Balancer**

====================================================================================================
ðŸ“Œ ROLE OF L4 LOAD BALANCER
====================================================================================================

Question L4 answers:
--------------------
ðŸ‘‰ Which BACKEND CONNECTION should receive this TCP request?

L4 Load Balancer works at:
--------------------------
âœ” Transport Layer (TCP / UDP)

L4 Load Balancer does NOT:
--------------------------
âŒ Understand HTTP
âŒ Read URL paths
âŒ Inspect headers or cookies
âŒ Make application-level decisions

====================================================================================================
ðŸ” WHAT L4 LOAD BALANCER ACTUALLY DOES
====================================================================================================

- Accepts incoming TCP connections
- Selects ONE healthy backend server or Data Center.
- Forwards the **entire TCP stream**
- Maintains connection until it closes

ðŸ‘‰ L4 is FAST and LIGHTWEIGHT

====================================================================================================
ðŸ“Œ HOW L4 LOAD BALANCER CHOOSES SERVER
====================================================================================================

1ï¸âƒ£ ROUND ROBIN
--------------
- Server A
- Server B
- Server C
- Repeat

--------------------------------------------------

2ï¸âƒ£ LEAST CONNECTIONS
--------------------
- Chooses server with the fewest active TCP connections

--------------------------------------------------

3ï¸âƒ£ HASH-BASED ROUTING (5-TUPLE HASH)
------------------------------------
Decision based on:
- Source IP
- Destination IP
- Source Port
- Destination Port
- Protocol

Used for:
âœ” Connection stickiness

--------------------------------------------------

4ï¸âƒ£ HEALTH CHECK FILTERING
-------------------------
âŒ Unhealthy server is REMOVED
âœ” Only healthy servers receive traffic

====================================================================================================
ðŸ“Š L4 LOAD BALANCER DECISION FLOW
====================================================================================================

Incoming TCP connection
        â†“
Check list of healthy servers
        â†“
Apply selection algorithm
        â†“
Select ONE backend server
        â†“
Forward TCP stream
        â†“
Maintain connection

====================================================================================================
ðŸ§  KEY TAKEAWAYS
====================================================================================================

âœ” L4 is the first logical component after DNS
âœ” L4 operates before HTTP exists
âœ” L4 does NOT terminate TLS (usually)
âœ” L4 only forwards TCP/UDP packets

====================================================================================================
ðŸŽ¤ INTERVIEW-SAFE ONE-LINER
====================================================================================================

â€œAfter DNS resolution, the client establishes a TCP connection to the resolved IP.
The L4 load balancer is the first logical component that handles this connection,
distributing it to a healthy backend using transport-layer algorithms.â€

====================================================================================================
END OF TRAFFIC ENTERS REGION STAGE
====================================================================================================
-->
